
from flask import Flask, render_template, request, jsonify

app = Flask(__name__)

class FinTechChatbot:
    def __init__(self):
        self.knowledge_base = {
            'loan': 'A loan is a sum of money that is borrowed and expected to be paid back with interest.',
            'interest rate': 'An interest rate is the percentage of a loan that is charged as interest to the borrower.',
            'credit report': 'A credit report is a detailed summary of an individual\'s credit history, used by lenders to assess creditworthiness.',
            'credit bureau': 'A credit bureau is an agency that collects and maintains individual credit information and provides it to lenders, creditors, and consumers.',
            'cibil': 'CIBIL (Credit Information Bureau India Limited) is India\'s first credit information company. It maintains credit records of individuals and companies.',
            'credit score': 'A credit score is a numerical expression based on a statistical analysis of a person\'s credit files, representing the creditworthiness of an individual.',
            'mortgage': 'A mortgage is a loan used to purchase real estate, where the property serves as collateral.',
            'emi': 'EMI (Equated Monthly Installment) is a fixed payment amount made by a borrower to a lender at a specified date each month.',
            'collateral': 'Collateral is an asset that a lender accepts as security for a loan. If the borrower defaults, the lender can seize the collateral.',
            'debt': 'Debt is money borrowed by one party from another, often with interest charges.',
            'credit limit': 'Credit limit is the maximum amount of credit that a financial institution extends to a client.',
            'kyc': 'KYC (Know Your Customer) is a standard due diligence process used by financial institutions to verify customer identity and assess risks.',
            'net banking': 'Net banking allows customers to conduct financial transactions through their bank\'s website.',
            'upi': 'UPI (Unified Payments Interface) is an instant real-time payment system that enables inter-bank transactions.'
        }

    def get_response(self, user_input):
        user_input = user_input.lower()
        
        # Check for direct matches in knowledge base
        for key in self.knowledge_base:
            if key in user_input:
                return self.knowledge_base[key]
        
        # Handle common greetings
        greetings = ['hi', 'hello', 'hey']
        if any(greeting in user_input for greeting in greetings):
            return "Hello! I'm your FinTech assistant. How can I help you today?"
        
        # Handle general help request
        if 'help' in user_input:
            return "I can help you with information about loans, interest rates, credit scores, CIBIL, mortgages, EMI, and other financial topics. What would you like to know?"
        
        return "I'm sorry, I don't have information about that topic. You can ask me about loans, interest rates, credit reports, CIBIL, mortgages, EMI, or other banking services."

chatbot = FinTechChatbot()

@app.route('/')
def home():
    return render_template('index.html')

@app.route('/get_response', methods=['POST'])
def get_bot_response():
    user_message = request.form['msg']
    return jsonify({'response': chatbot.get_response(user_message)})

if __name__ == '__main__':
    app.run(host='0.0.0.0', port=8080)
